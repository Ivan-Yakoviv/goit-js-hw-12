{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport async function getPhotos(query, page = 1, perPage = 15) {\n    const baseUrl = 'https://pixabay.com';\n    const endPoint = '/api/';\n\n    const params = new URLSearchParams({\n        key: '44168099-5911f69422da676ec159a331f',\n        q: `${query}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: page,\n        per_page: perPage\n    });\n\n    const url = `${baseUrl}${endPoint}?${params}`;\n\n    try {\n        const res = await axios(url);\n        return res.data;\n    } catch (error) {\n        console.error(error.message);\n   }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nlet lightbox;\n\nexport function renderGallery(images) {\n    const markup = images.map(image => createMarkup(image)).join(\"\");\n    gallery.insertAdjacentHTML('beforeend', markup);\n    if (lightbox) {\n        lightbox.refresh();\n    } else {\n        lightbox = new SimpleLightbox(\".gallery a\", { captionDelay: 250, captionsData: \"alt\" });\n        lightbox.refresh();\n    }\n}\n\nfunction createMarkup(image) {\n    return `\n                <a class=\"link\" href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                    <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                <ul class=\"info\">\n                 <li><h3 class=\"info-title\">Likes</h3><p class=\"info-text\">${image.likes}</p></li>\n                 <li><h3 class=\"info-title\">Views</h3><p class=\"info-text\">${image.views}</p></li>\n                 <li><h3 class=\"info-title\">Comments</h3><p class=\"info-text\">${image.comments}</p></li>\n                 <li><h3 class=\"info-title\">Downloads</h3><p class=\"info-text\">${image.downloads}</p></li>\n                </ul>\n                </a>\n            `;\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector(\".gallery\");\n    gallery.innerHTML = \"\";\n}","import { getPhotos } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-function.js';\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.querySelector(\".search-form\");\nconst input = document.querySelector(\"input\");\nconst loader = document.querySelector(\".loader\");\nconst loadMore = document.querySelector(\".load-more\");\nconst gallery = document.querySelector(\".gallery\");\nconst scrollToTopBtn = document.querySelector(\".scrollToTopBtn\")\n\nfunction showLoader() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n    loader.style.display = \"none\";\n}\n\nfunction scrToTop() {\n     window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n    });\n}\n\nlet currentPage = 1;\nlet query = '';\n\nsearchForm.addEventListener(\"submit\", onSearch);\nloadMore.addEventListener(\"click\", onLoadMore);\nscrollToTopBtn.addEventListener(\"click\", scrToTop);\n\nasync function onSearch(event) {\n    event.preventDefault();\n    clearGallery();\n\n    query = input.value.trim();\n\n    if (query === \"\") {\n        clearGallery();\n        return;\n    }\n\n    currentPage = 1;\n    showLoader();\n\n    try {\n        const data = await getPhotos(query, currentPage);\n\n        if (data.hits.length === 0) {\n            clearGallery();\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                messageColor: '#FAFAFB',\n                backgroundColor: '#EF4040',\n                iconColor: '#FAFAFB',\n                position: 'topRight'\n            });\n            input.value = \"\";\n            loadMore.style.display = \"none\";\n            scrollToTopBtn.style.display = \"none\";\n        } else {\n            renderGallery(data.hits);\n            loadMore.style.display = \"flex\";\n            scrollToTopBtn.style.display = \"flex\";\n            loader.style.position = \"relative\";\n            \n            if (data.totalHits <= currentPage * 15) {\n                loadMore.style.display = \"none\";\n                scrollToTopBtn.style.display = \"none\";\n                iziToast.info({\n                title: 'End of Results',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n        }\n    } catch(error) {\n            iziToast.error({\n                title: 'Error',\n                message: error.message\n            });\n        } finally {\n        hideLoader();\n        // scrollToTopBtn.style.display = \"flex\";\n    }\n}\n\nasync function onLoadMore() {\n    currentPage += 1;\n    showLoader();\n\n    try {\n        const data = await getPhotos(query, currentPage);\n        renderGallery(data.hits);\n\n        const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n\n        if (data.totalHits <= currentPage * 15) {\n            loadMore.style.display = \"none\";\n            iziToast.info({\n                title: 'End of Results',\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n    } catch (error) {\n         iziToast.error({\n                title: 'Error',\n                message: error.message\n            });\n    } finally {\n        hideLoader();\n    }\n}"],"names":["getPhotos","query","page","perPage","baseUrl","endPoint","params","url","axios","error","gallery","lightbox","renderGallery","images","markup","image","createMarkup","SimpleLightbox","clearGallery","searchForm","input","loader","loadMore","scrollToTopBtn","showLoader","hideLoader","scrToTop","currentPage","onSearch","onLoadMore","event","data","iziToast","cardHeight"],"mappings":"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"}